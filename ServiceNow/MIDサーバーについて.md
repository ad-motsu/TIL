## MIDサーバーとは
基本的にはデータを外部とやり取りするためのサーバーで、プロキシサーバーとしての役割も担う。
外部連携ツールにインテグレーションハブという機能もあるが、後述の理由で使用範囲が異なる。
  
## MIDサーバーの役割
セキュリティ上の観点からFWが設置されているため、外部NWからのアクセスを無条件で許可はしていない。また、プライベートNW内に存在するIPアドレスはパブリックIPアドレスではなく、プライベートしか持たないものも多いため、FWを超えてアクセスしたとしても、各機器との通信ができない。
MIDサーバーは内部NW内、もしくはDMZ内に構築できるため、通信機器がプライベートIPアドレスしか持たない場合でも通信ができる。
FWは内部NWもしくはDMZとSNOWインスタンスとの通信のみを許可すればいいので、上記にあげた問題を解決できる。
  
## OS
Windows, Linuxの２つのOSで作成可能
特に性能差はないが、構成情報収集のためのDiscoveryでWidowsサーバーの情報収集のためにはWindows OSであることが前提。特に指定がないなら、Windowsで作成するのがおすすめ。
  
## 通信要件
MIDサーバはハンドシェイクを行わずにECCキューを使用してインスタンスとの通信を行う（MIDサーバからインスタンスの一方向のみ）
HTTP/HTTPSの許可が必要になる。業務内に配置したNWからの場合でも、プロキシサーバを通じる場合のどちらも要件は同じ。
  
## 用途
### Discovery
IPアドレスを持つNW内の構成情報を自動収集し更新をしてくれる機能。MIDサーバと各サーバ間でプローブと呼ばれる分類子付の通信を送り、それに返答する形を繰り返すことで情報を収集する。  
収集する対象によって通信要件が異なるため（LinuxならSSHポート）、場合によってはAny-Anyでの通信許可設定が必要となる。
プローブで収集した情報はMIDサーバを通じてECCキューテーブルに格納してやり取りする。
なお、特定のポートの解放が必須であり、セキュリティを考慮しないと機能が果たせない場合がある。
例：WMI,SSH,HTTPS,MIB,SNMP,DNS...(12種類程がデフォルトでスキャンする設定となっている)
  
### 外部サービス連携
監視ツール（Zabbix等）と連携させることで検知したものをServiceNowに取り込むことが可能。  
Zabbix側でAPI連携が可能になるなど、API連携でも問題ない場合はMIDサーバを構築する必要なし。
